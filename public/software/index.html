<!doctype html>

<html lang="en">

<head>
  <title>Mailund on the Internet</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The HTML5 Herald" />
  <meta name="author" content="" />
  

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

<link rel="stylesheet" type="text/css" href="https://mailund.dk/css/styles.css" />
<link rel="stylesheet" href="https://cdn.rawgit.com/tonsky/FiraCode/1.205/distr/fira_code.css">

 
       <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Droid Sans" type="text/css" media="all" />
     
       <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira Mono" type="text/css" media="all" />
     

 <style>
 body {
     font-family: 'Droid Sans';
 }
 code {
    font-family: 'Fira Code';
 }
 </style>

 <script type="text/javascript" async
   src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
   MathJax.Hub.Queue(function() {
     
     
     
     var all = MathJax.Hub.getAllJax(), i;
     for(i = 0; i < all.length; i += 1) {
         all[i].SourceElement().parentNode.className += ' has-jax';
     }
   });

   MathJax.Hub.Config({
   
   TeX: { equationNumbers: { autoNumber: "AMS" } }
   });
   MathJax.Hub.Config({
   tex2jax: {
     inlineMath: [['$$','$$'], ['\\(','\\)']],
     displayMath: [['$$$','$$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
          extensions: ["AMSmath.js", "AMSsymbols.js"] }
   }
   });
 </script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=386493837"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', '386493837');
        }
      </script>
</head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://mailund.dk/">Mailund on the Internet</a>
            </h1>

      <ul id="social-media">
                
      </ul>
      
      <p><em>On Writing, Science, Programming and more</em></p>
      

    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://mailund.dk/about/">
                <i class="fa-li fa  fa-lg"></i><span>About</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://mailund.dk/posts">
                <i class="fa-li fa  fa-lg"></i><span>Posts</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://mailund.dk/books/">
                <i class="fa-li fa  fa-lg"></i><span>Books</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://mailund.dk/fiction/">
                <i class="fa-li fa  fa-lg"></i><span>Fiction</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://mailund.dk/publications/">
                <i class="fa-li fa  fa-lg"></i><span>Publications</span>
            </a>
        </li>
        
        <li>
            <a class="active" href="https://mailund.dk/software/">
                <i class="fa-li fa  fa-lg"></i><span>Software</span>
            </a>
        </li>
        
    </ul>
</nav>

    <main>




<article>

    <h1>Software</h1>

    
        <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2018-09-09T00:00:00Z">Sep 9, 2018</time>
        </li>
        
        

        
        <li>
            <em>
                
                    
                    <a href="https://mailund.dk/tags/software/">#software</a>
                
                    , 
                    <a href="https://mailund.dk/tags/programming/">#programming</a>
                
            </em>
        </li>
        

        <li>3 min read</li>
    </ul>
</aside>
    

    <p>I have written various software over the years. You can get a list of most of it at <a href="https://github.com/mailund">GitHub</a>. Below is a list of software I have worked on recently (and I promise to still be maintaining). I will do my best to handle issues with older software, but some of it is simply too old for me to keep track of.</p>
<h2 id="pmatch">pmatch</h2>
<p>The <a href="https://mailund.github.io/pmatch/">pmatch</a> R package implements pattern-matching, similar to Haskell and SML.</p>
<p>You can define data types, for example a binary tree:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>tree := L(elm : numeric) | T(left : tree, right : tree)
</span></span></code></pre></div><p>and then match data against it, like</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>f &lt;- <span style="color:#000080;font-weight:bold">function</span>(x) {
</span></span><span style="display:flex;"><span>    cases(x,
</span></span><span style="display:flex;"><span>          L(v) -&gt; v,
</span></span><span style="display:flex;"><span>          T(left,right) -&gt; c(f(left), f(right)))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>x &lt;- T(T(L(<span style="color:#00f">1</span>),L(<span style="color:#00f">2</span>)), T(T(L(<span style="color:#00f">3</span>),L(<span style="color:#00f">4</span>)),L(<span style="color:#00f">5</span>)))
</span></span><span style="display:flex;"><span>f(x)
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">#&gt; [1] 1 2 3 4 5</span>
</span></span></code></pre></div><h2 id="foolbox">foolbox</h2>
<p>The <a href="https://mailund.github.io/foolbox/">foolbox R package</a> is a toolbox for doing metaprogramming on R functions. It provides handles for rewriting functions using various callbacks.</p>
<p>For example, you can replace the function call f(y) in the body of g with the function body, 2 * x like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>f &lt;- <span style="color:#000080;font-weight:bold">function</span>(x) <span style="color:#00f">2</span> * x
</span></span><span style="display:flex;"><span>g &lt;- <span style="color:#000080;font-weight:bold">function</span>(y) f(y)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>callbacks &lt;- rewrite_callbacks() %&gt;%
</span></span><span style="display:flex;"><span>    add_call_callback(f, <span style="color:#000080;font-weight:bold">function</span>(expr, <span style="color:#000080;font-weight:bold">...</span>) quote(<span style="color:#00f">2</span> * x))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>g %&gt;% rewrite() %&gt;% rewrite_with(callbacks)
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">#&gt; function (y)</span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">#&gt; 2 * x</span>
</span></span></code></pre></div><p>Check the homepage for examples such as <a href="https://mailund.github.io/foolbox/articles/partial-evaluation.html">partial evaluation</a>. (The partial evaluation there is not particularly efficient; slower than just calling functions, actually. Maybe some day I can make it faster.)</p>
<h2 id="tailr">tailr</h2>
<p>The <a href="https://mailund.github.io/tailr/">tailr R package</a> implements the tail-recursion optimisation in R. You don&rsquo;t really get much of a speedup if you combine <code>pmatch</code> and <code>tailr</code>—hand-written looping functions will always be faster—but you avoid errors when running out of stack space.</p>
<p>If I could speedup the pattern matching in <code>pmatch</code>, I believe I could make this optimisation faster; using it would be easier than hand-written looping functions, so that might make the <code>tailr</code> package more interesting.</p>
<h2 id="gwf">gwf</h2>
<p>The <a href="https://gwf.readthedocs.io/en/latest/tutorial.html">gwf</a> program is something I wrote for handling workflows on our cluster. You can specify dependencies and such using a DSL in Python, and when you submit jobs to the cluster they will be scheduled with respect to these dependencies.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#000080;font-weight:bold">from</span> gwf <span style="color:#000080;font-weight:bold">import</span> Workflow
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gwf = Workflow()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gwf.target(<span style="color:#00f">&#39;TargetA&#39;</span>, inputs=[], outputs=[<span style="color:#00f">&#39;x.txt&#39;</span>]) &lt;&lt; <span style="color:#00f">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#00f">echo &#34;this is x&#34; &gt; x.txt
</span></span></span><span style="display:flex;"><span><span style="color:#00f">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gwf.target(<span style="color:#00f">&#39;TargetB&#39;</span>, inputs=[], outputs=[<span style="color:#00f">&#39;y.txt&#39;</span>]) &lt;&lt; <span style="color:#00f">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#00f">echo &#34;this is y&#34; &gt; y.txt
</span></span></span><span style="display:flex;"><span><span style="color:#00f">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gwf.target(<span style="color:#00f">&#39;TargetC&#39;</span>, inputs=[<span style="color:#00f">&#39;x.txt&#39;</span>, <span style="color:#00f">&#39;y.txt&#39;</span>], outputs=[<span style="color:#00f">&#39;z.txt&#39;</span>]) &lt;&lt; <span style="color:#00f">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#00f">cat x.txt y.txt &gt; z.txt
</span></span></span><span style="display:flex;"><span><span style="color:#00f">&#34;&#34;&#34;</span>
</span></span></code></pre></div><p>You can also get the status of them and such.</p>
<p>I am no longer the main developer of <code>gwf</code>. Dan Søndergaard has taken over, and I do not contribute much to the tool any more. Mostly because I am not running a lot of jobs on clusters. I might return to it later, when I need a cluster again.</p>


</article>


<section class="post-nav">
    <ul>
        
        
        <li>
            <a href="https://mailund.dk/publications/">Publications <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
    





</main>
    <footer>
        <h6>Copyright © 2020-2025 - Thomas Mailund |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://mailund.dk/index.xml">Subscribe</a></h6>
    </footer>
</div>
<script src="https://mailund.dk/js/scripts.js"></script>
</body>
<div id="amzn-assoc-ad-04956520-8388-43ab-9b6e-fbe758d208f8"></div>
<script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=04956520-8388-43ab-9b6e-fbe758d208f8"></script>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</html>
